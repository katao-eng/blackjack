# ブラックジャック

## 目的

PHP とオブジェクト指向習得のため、ブラックジャックゲームを作成する。

## ゲームのルール

ブラックジャックはカジノで行われるカードゲームの一種です。1〜13 までの数が書かれたカード 52 枚を使ってゲームが行われます。ルールは次の通りです。

- 実行開始時、ディーラーとプレイヤー（最大 3 人）全員に２枚ずつカードが配られる
- 自分のカードの合計値が 21 に近づくよう、カードを追加するか、追加しないかを決める
- カードの合計値が 21 を超えてしまった時点で、その場で負けが確定する
- プレイヤーはカードの合計値が 21 を超えない限り、好きなだけカードを追加できる
- ディーラーはカードの合計値が 17 を超えるまでカードを追加する

各カードの点数は次のように決まっています。

- 2 から 9 までは、書かれている数の通りの点数
  10,J,Q,K は 10 点
- A は 1 点あるいは 11 点として、手の点数が最大となる方で数える
- このゲームには何人かのプレイヤーがおり、カードの合計値を競います。

以下のルールの元、コンソール（ターミナル）上で動作するようにします。

- プレイヤー 1 は実行者、残りのプレイヤーとディーラーは CPU が自動実行する
- 実行開始時、プレイヤーとディーラーはそれぞれ、カードを 2 枚引く。引いたカードは画面に表示する。ただし、他のプレイヤーの全カードとディーラーの 2 枚目のカードは分からないようにする
- その後、先にプレイヤーがカードを引く。プレイヤーのカードの合計値が 21 を超えたらプレイヤーの負け
- プレイヤーはカードを引くたびに次のカードを引くか選択できる
- プレイヤーがカードを引き終えたら、ディーラーは自分のカードの合計値が 17 以上になるまで引き続ける
- プレイヤーとディーラーが引き終えたら勝負。カードの合計値が 21 により近い方が勝ち

## コンソール画面イメージ

```
ブラックジャックを開始します。
あなたの引いたカードはハートの7です。
あなたの引いたカードはクラブの8です。
ディーラーの引いたカードはダイヤのQです。
ディーラーの引いた2枚目のカードはわかりません。
あなたの現在の得点は15です。カードを引きますか？（Y/N）
Y
あなたの引いたカードはスペードの５です。
あなたの現在の得点は20です。カードを引きますか？（Y/N）
N
ディーラーの引いた2枚目のカードはダイヤの2でした。
ディーラーの現在の得点は12です。
ディーラーの引いたカードはハートのKです。
あなたの得点は20です。
ディーラーの得点は22です。
あなたの勝ちです！
ブラックジャックを終了します。
```

## 環境構築

```bash
# Docker イメージのビルド
docker-compose build

# Docker コンテナの起動
docker-compose up -d

# Docker コンテナ内でコマンドを実行する
docker-compose exec app php -v

# Docker コンテナの停止・削除
docker-compose down
```

## 環境構築 (Remote Development 編)

Docker イメージをビルドする。

```bash
docker-compose build
```

VSCode の Remote-Containers: Open Folder in Container からコンテナを開く。

コマンドは VSCode のターミナルから実行する。

終了するときはコンテナを停止・削除する。

```bash
docker-compose down
```

### デバッグ (Xdebug)

デバッグしたい時は下記の順に実施する。

1. コードにブレークポイントを設定する
2. デバッグビューを開く
3. 「Listen for Xdebug」を選択してデバッグを開始する
4. コードを実行する

ブレークポイントで止まらない場合、 `.vscode/launch.json` の port が 9003 であることを確認する。
